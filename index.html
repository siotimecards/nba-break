<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>NBA Breaks - Choix √©quipe</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #f4f4f4; }
    h1 { margin: 20px; }
    .grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 15px; padding: 20px; }
    .team { cursor: pointer; background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); transition: 0.2s; }
    .team img { width: 80px; height: 80px; }
    .team:hover { transform: scale(1.1); }
    .taken { opacity: 0.3; pointer-events: none; }
  </style>
</head>
<body>
  <h1>Choisis ton √©quipe NBA üèÄ</h1>
  <div class="grid" id="teams"></div>

  <script>
    // ‚ö†Ô∏è Mets ici ton URL Apps Script
    const endpoint = "https://script.google.com/macros/s/AKfycby2Zsg6W2UU4d4STEPHrFqPEORkG-QdF9vxqXqBlvXRrHYKeL_5uk5fpi4o4sKXuOfb/exec";

    const teams = [
      {name:"Atlanta Hawks", logo:"https://a.espncdn.com/i/teamlogos/nba/500/atl.png"},
      {name:"Boston Celtics", logo:"https://a.espncdn.com/i/teamlogos/nba/500/bos.png"},
      {name:"Brooklyn Nets", logo:"https://a.espncdn.com/i/teamlogos/nba/500/bkn.png"},
      {name:"Charlotte Hornets", logo:"https://a.espncdn.com/i/teamlogos/nba/500/cha.png"},
      {name:"Chicago Bulls", logo:"https://a.espncdn.com/i/teamlogos/nba/500/chi.png"},
      {name:"Cleveland Cavaliers", logo:"https://a.espncdn.com/i/teamlogos/nba/500/cle.png"},
      {name:"Dallas Mavericks", logo:"https://a.espncdn.com/i/teamlogos/nba/500/dal.png"},
      {name:"Denver Nuggets", logo:"https://a.espncdn.com/i/teamlogos/nba/500/den.png"},
      {name:"Detroit Pistons", logo:"https://a.espncdn.com/i/teamlogos/nba/500/det.png"},
      {name:"Golden State Warriors", logo:"https://a.espncdn.com/i/teamlogos/nba/500/gs.png"},
      {name:"Houston Rockets", logo:"https://a.espncdn.com/i/teamlogos/nba/500/hou.png"},
      {name:"Indiana Pacers", logo:"https://a.espncdn.com/i/teamlogos/nba/500/ind.png"},
      {name:"LA Clippers", logo:"https://a.espncdn.com/i/teamlogos/nba/500/lac.png"},
      {name:"LA Lakers", logo:"https://a.espncdn.com/i/teamlogos/nba/500/lal.png"},
      {name:"Memphis Grizzlies", logo:"https://a.espncdn.com/i/teamlogos/nba/500/mem.png"},
      {name:"Miami Heat", logo:"https://a.espncdn.com/i/teamlogos/nba/500/mia.png"},
      {name:"Milwaukee Bucks", logo:"https://a.espncdn.com/i/teamlogos/nba/500/mil.png"},
      {name:"Minnesota Timberwolves", logo:"https://a.espncdn.com/i/teamlogos/nba/500/min.png"},
      {name:"New Orleans Pelicans", logo:"https://a.espncdn.com/i/teamlogos/nba/500/no.png"},
      {name:"New York Knicks", logo:"https://a.espncdn.com/i/teamlogos/nba/500/ny.png"},
      {name:"Oklahoma City Thunder", logo:"https://a.espncdn.com/i/teamlogos/nba/500/okc.png"},
      {name:"Orlando Magic", logo:"https://a.espncdn.com/i/teamlogos/nba/500/orl.png"},
      {name:"Philadelphia 76ers", logo:"https://a.espncdn.com/i/teamlogos/nba/500/phi.png"},
      {name:"Phoenix Suns", logo:"https://a.espncdn.com/i/teamlogos/nba/500/phx.png"},
      {name:"Portland Trail Blazers", logo:"https://a.espncdn.com/i/teamlogos/nba/500/por.png"},
      {name:"Sacramento Kings", logo:"https://a.espncdn.com/i/teamlogos/nba/500/sac.png"},
      {name:"San Antonio Spurs", logo:"https://a.espncdn.com/i/teamlogos/nba/500/sa.png"},
      {name:"Toronto Raptors", logo:"https://a.espncdn.com/i/teamlogos/nba/500/tor.png"},
      {name:"Utah Jazz", logo:"https://a.espncdn.com/i/teamlogos/nba/500/utah.png"},
      {name:"Washington Wizards", logo:"https://a.espncdn.com/i/teamlogos/nba/500/wsh.png"}
    ];

    const container = document.getElementById("teams");

    // üîπ Cr√©ation des logos avec clic
    teams.forEach(team => {
      const div = document.createElement("div");
      div.className = "team";
      div.setAttribute("data-team", team.name);
      div.innerHTML = `<img src="${team.logo}" alt="${team.name}"><br>${team.name}`;

      div.onclick = () => {
        const pseudo = prompt("Entre ton pseudo :");
        if (pseudo) {
          fetch(endpoint, {
            method: "POST",
            body: JSON.stringify({ pseudo: pseudo, team: team.name })
          })
          .then(res => {
            alert("‚úÖ Inscription envoy√©e pour " + team.name);
            div.classList.add("taken"); // griser l‚Äô√©quipe imm√©diatement
          })
          .catch(err => {
            alert("‚ùå Erreur : " + err);
          });
        }
      };

      container.appendChild(div);
    });

    // üîπ Charger les √©quipes d√©j√† prises au d√©marrage
    async function loadTakenTeams() {
      try {
        const res = await fetch(endpoint);
        const taken = await res.json();
        taken.forEach(teamName => {
          const div = document.querySelector(`[data-team="${teamName}"]`);
          if (div) div.classList.add("taken");
        });
      } catch(err) {
        console.error("Erreur chargement √©quipes d√©j√† prises :", err);
      }
    }

    loadTakenTeams();

  </script>
</body>
</html>
